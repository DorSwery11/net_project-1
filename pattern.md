# דוח מסכם: פרויקט תקשורת מחשבים - חלק 2
## יישום רשת וניתוח תעבורה

**מגישים:** אדיר בוסקילה 209487727 וליאב ויצמן 324926898  
**תאריך:** 11.01.2026  
**קישור ל-GitHub:** [networking-project](https://github.com/...)

---

## 1. הסבר כללי על המערכת ומבנה הקוד

פיתחנו מערכת צ'אט בשם "Cyber Chat" שעובדת בארכיטקטורת Client-Server על גבי TCP. המערכת מאפשרת למספר משתמשים להתחבר במקביל, לראות מי מחובר, ולשלוח הודעות - גם לכולם וגם הודעות פרטיות.

### רכיבי המערכת

**א. צד השרת - server.py**

השרת הוא הלב של המערכת ואחראי על ניהול החיבורים והעברת ההודעות.

**תקשורת (Sockets):**
השרת מאזין בפורט 12345 על כתובת 127.0.0.1 ומקבל חיבורים מלקוחות.

**ריבוי תהליכונים (Multi-Threading):**
כדי לתמוך בהרבה לקוחות במקביל (עד 50), השרת יוצר Thread נפרד לכל לקוח שמתחבר. ככה השרת תמיד פנוי לקבל חיבורים חדשים בזמן שהוא מטפל באחרים.

**ניהול משתמשים:**
המערכת שומרת מילון של כל המשתמשים המחוברים. כי יש הרבה Threads שניגשים לאותו מילון, השתמשנו ב-Lock למניעת התנגשויות.

**פרוטוקול האפליקציה:**
- התחברות: לקוח שולח שם משתמש, השרת בודק שהשם לא תפוס
- עדכון רשימה: כשמישהו מתחבר או מתנתק, כל הלקוחות מקבלים עדכון
- הודעות: אפשר לשלוח לכולם (Broadcast) או בפורמט `TO:user:message` להודעה פרטית

**ב. צד הלקוח - client.py**

הלקוח מספק ממשק גרפי נוח לשימוש.

**ממשק גרפי (Tkinter):**
עיצבנו את הממשק בסגנון Cyberpunk עם צבעים כהים, הודעות צבעוניות, רשימת משתמשים מחוברים, ותמיכה באימוג'ים.

**תקשורת אסינכרונית:**
כדי שהממשק לא יקפא בזמן שמחכים להודעות, יש Thread נפרד שמאזין כל הזמן לשרת ומעדכן את המסך מיד כשמגיעה הודעה חדשה.

---

## 2. מבנה הקוד

חילקנו את הקוד ל-6 קבצים:

| קובץ | תפקיד |
|------|-------|
| `main.py` | נקודת כניסה - מאפשר לבחור שרת או לקוח |
| `server.py` | השרת - מטפל בחיבורים ובהעברת הודעות |
| `client.py` | הלקוח - הממשק הגרפי והתקשורת |
| `config.py` | הגדרות - פורט, כתובת, מקסימום לקוחות |
| `utils.py` | פונקציות עזר - לוגים, ולידציה, היסטוריה |
| `ui_components.py` | רכיבי UI - כפתורים, שדות טקסט מעוצבים |

---

## 3. הוראות התקנה והרצה

**דרישות:** Python 3.x

**הפעלת השרת:**
```bash
python main.py server
```
או להריץ `python main.py` ולבחור Server מהממשק.

**הפעלת לקוחות:**
```bash
python main.py client
```
פותחים כמה חלונות, כל אחד עם שם משתמש אחר.

---

## 4. דוגמאות קלט ופלט

### ממשק המערכת בזמן פעולה

![Screenshot_4](Screenshot_4.png)

**צד שמאל - השרת (Cyber Chat Server v2.0):**

בחלק העליון רואים את הכתובת והפורט (127.0.0.1:12345) וכפתורי Start/Stop.

באמצע - הלוגים בזמן אמת:
```
[12:41:38] Server initialized. Ready to start
[12:41:59] Server started on 127.0.0.1:12345
[12:41:59] Max clients: 50
[12:42:27] New connection from 127.0.0.1:6181
[12:42:27] 'Liav' joined the chat
[12:42:52] 'Adir' joined the chat
[12:43:07] [Adir] How fun it is to learn networking
[12:43:26] [Adir] It's Amazing!!!
[12:43:39] [Liav] Its really Amazing!!!!
[12:43:45] 'Adir' left the chat
```

בחלק התחתון - סטטיסטיקות:
- Connected: 1 (לקוח אחד עדיין מחובר)
- Messages: 6
- Uptime: 00:04:40
- Peak Users: 2

**צד ימין - הלקוח (Cyber Chat):**

- המשתמש Liav מחובר בסטטוס Online
- רשימת המחוברים בצד שמאל
- ההודעות מוצגות בבועות:
  - הודעות של Adir (מישהו אחר) - בצד שמאל בסגול
  - הודעות של Liav (אני) - בצד ימין בטורקיז
- הודעת מערכת: 'Adir' has left the chat

### תהליך שליחת הודעה

1. **קלט:** המשתמש מקליד הודעה ולוחץ Enter או על כפתור Send
2. **עיבוד:** הלקוח שולח את ההודעה לשרת, השרת מפיץ לכל המחוברים
3. **פלט:** ההודעה מופיעה מיד אצל כולם

---

## 5. ניתוח תעבורה של היישום (Wireshark)

לכדנו את התעבורה עם Wireshark בממשק Loopback ושמרנו בקובץ `part2.pcap`.

### התעבורה שנלכדה

![Screenshot_3](Screenshot_3.png)

**ההבדל הגדול מחלק 1:** פה רואים תקשורת מוצלחת! כל השורות ירוקות, אין RST.

**פרטי התקשורת:**
- Server Port: 12345
- Client Port: 6181
- כתובות: 127.0.0.1 ↔ 127.0.0.1

### א. שכבת הרשת (Network Layer - IP)

כל התקשורת בין 127.0.0.1 ל-127.0.0.1 - הכל מקומי על אותו מחשב.

### ב. שכבת התעבורה (Transport Layer - TCP)

בחרנו ב-TCP כי הוא אמין - מבטיח שההודעות יגיעו בסדר הנכון ובשלמותן. חשוב לצ'אט.

**הקמת חיבור (Three-Way Handshake):**
1. SYN - הלקוח מבקש להתחבר
2. SYN,ACK - השרת מאשר
3. ACK - הלקוח מאשר, החיבור פתוח

**העברת נתונים:**

יש שני סוגי חבילות:

**חבילות עם מידע [PSH, ACK]:**
- Len > 0 (יש תוכן)
- אלה ההודעות האמיתיות של הצ'אט
- בתמונה רואים Len=33 - זו ההודעה "How fun it is to learn networking"

**חבילות אישור [ACK]:**
- Len = 0 (ריקות)
- רק אישור ש"קיבלתי את מה ששלחת"
- חלק מהפרוטוקול TCP

### ג. חילוץ תוכן ההודעה

בתחתית המסך רואים את ה-Payload בפורמט Hex ו-ASCII:

```
Data: 486f772066756e206974206973...
ASCII: "How fun it is to learn networking"
```
וזו ההודעה ששלח אדיר בצאט שלנו.

### ד. פרטים טכניים מחבילה

| שדה | ערך |
|-----|-----|
| Frame | 181 |
| גודל החבילה | 77 bytes (616 bits) |
| Source Port | 6181 (הלקוח) |
| Destination Port | 12345 (השרת) |
| Sequence Number | 9 |
| Acknowledgment | 149 |
| Data Length | 33 bytes |
| Window Size | 2619648 |

---

## 6. תיאור שימוש בבינה מלאכותית

השתמשנו ב-Claude (Anthropic) במהלך הפיתוח:

**מטרות השימוש:**
- עיצוב הממשק הגרפי בסגנון Cyberpunk
- דיבוג בעיות Threading
- הבנת פרוטוקולי TCP ודגלים ב-Wireshark
- כתיבת תיעוד והערות בקוד

**דוגמאות לפרומפטים:**
- "Create a TCP chat server that handles multiple clients using threading"
- "Design a cyberpunk-themed GUI for the chat client using Tkinter"
- "Explain TCP flags and what RST vs PSH,ACK means in Wireshark"
- "How to prevent race conditions when multiple threads access the same dictionary?"

כל הקוד נבדק והובן על ידינו לפני השימוש.

---

## 7. תוצרים להגשה

**קבצי קוד:**
- `server.py` - שרת TCP
- `client.py` - לקוח עם GUI
- `main.py` - נקודת כניסה
- `config.py` - הגדרות
- `utils.py` - פונקציות עזר
- `ui_components.py` - רכיבי UI

**קבצי לכידה:**
- `part2.pcap` - תעבורת הצ'אט מ-Wireshark

**צילומי מסך:**
- Screenshot_3.png - תעבורה ב-Wireshark
- Screenshot_4.png - ממשק היישום

---

**אדיר בוסקילה וליאב ויצמן**  
קורס רשתות תקשורת, ינואר 2026
